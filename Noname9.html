<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlusÂ®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>Document</title>
  <style type="text/css">
	body {
		height: 1024px;
	}
	div {
		position:absolute;
		top: 100px;
		left: 100px;
		width: 200px;
		height: 200px;
		border: 1px solid red;
	}
	#d2 {
		width: 100px;
		height: 100px;
		border-color: green;
		top: 100px;
		left: 500px;
	}
  </style>
 </head>
 <body>
  <div id='d1'></div>
    <div id='d2'></div>
	<script type="text/javascript">
		var d2 = document.getElementById('d2');
		function moveEvent(e) {
			var x, y, t;
			t = e.target || e.srcElement;
			x = e.clientX;
			y = e.clientY;
			d2.style.top = (y - 50) + 'px';
			d2.style.left = (x - 50) + 'px';
		}
		function d2KeyDownEvent(e) {
			document.body.removeEventListener('mousemove', moveEvent);
			document.body.addEventListener('mousemove', moveEvent);
		}
		function d2KeyUpEvent(e) {
			document.body.removeEventListener('mousemove', moveEvent);
		}
		function myfun() {
		
			d2.addEventListener('mousedown', d2KeyDownEvent);
			d2.addEventListener('mouseup', d2KeyUpEvent);
			document.body.addEventListener('mouseup', d2KeyUpEvent);
		}
		myfun();
	</script>
 </body>
</html>
